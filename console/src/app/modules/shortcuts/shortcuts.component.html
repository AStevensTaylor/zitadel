<div cdkDropListGroup>
  <div class="shortcut-container">
    <div class="shortcut-title-container">
      <h2>{{'HOME.SHORTCUTS.SHORTCUTS' | translate}}</h2>
      <button [matTooltip]="(editState ? 'ACTIONS.CLOSE' : 'ACTIONS.EDIT') | translate" class="shortcut-btn"
        (click)="editState = !editState" mat-icon-button>
        <i *ngIf="!editState" class=" las la-edit"></i>
        <mat-icon *ngIf="editState">close</mat-icon>
      </button>
      <button matTooltip="{{'ACTIONS.RESETDEFAULT' | translate}}" (click)="reset()" *ngIf="editState" mat-icon-button>
        <i *ngIf="editState" class="las la-undo-alt"></i>
      </button>
    </div>

    <div class="shortcut-list-row">
      <div cdkDropList [cdkDropListData]="main" class="shortcut-list" (cdkDropListDropped)="drop($event, 'main')">
        <p *ngIf="editState" class="shortcut-desc">{{'HOME.SHORTCUTS.REORDER' | translate}}</p>
        <ng-container *ngFor="let shortcut of main">
          <!-- <template [ngTemplateOutlet]="shortcutRef" [ngTemplateOutletContext]="{shortcut: item}"></template> -->
          <ng-template cnslHasRole [hasRole]="shortcut.withRole">
            <a [routerLink]="shortcut.routerLink" class="shortcut-box"
              [ngClass]="{'edit-state': editState && !shortcut.disabled}" cdkDrag [cdkDragDisabled]="shortcut.disabled">
              <div class="shortcuts-avatar {{shortcut.color}}">
                <mat-icon *ngIf="shortcut.svgIcon" class="icon" [svgIcon]="shortcut.svgIcon"></mat-icon>
                <i *ngIf="shortcut.icon" class="icon {{shortcut.icon}}"></i>
              </div>
              <span *ngIf="shortcut.i18nTitle">{{shortcut.i18nTitle | translate}}</span>
              <span *ngIf="shortcut.title">{{shortcut.title}}</span>
            </a>
          </ng-template>
        </ng-container>
      </div>

      <div cdkDropList [cdkDropListData]="secondary" class="shortcut-list"
        (cdkDropListDropped)="drop($event, 'secondary')">
        <p *ngIf="editState" class="shortcut-desc">{{'HOME.SHORTCUTS.REORDER' | translate}}</p>
        <ng-container *ngFor="let shortcut of secondary">
          <!-- <template [ngTemplateOutlet]="shortcutRef" [ngTemplateOutletContext]="{shortcut: item}"></template> -->
          <ng-template cnslHasRole [hasRole]="shortcut.withRole">
            <a [routerLink]="shortcut.routerLink" class="shortcut-box"
              [ngClass]="{'edit-state': editState  && !shortcut.disabled}" cdkDrag
              [cdkDragDisabled]="shortcut.disabled">
              <div class="shortcuts-avatar {{shortcut.color}}">
                <mat-icon *ngIf="shortcut.svgIcon" class="icon" [svgIcon]="shortcut.svgIcon"></mat-icon>
                <i *ngIf="shortcut.icon" class="icon {{shortcut.icon}}"></i>
              </div>
              <span *ngIf="shortcut.i18nTitle">{{shortcut.i18nTitle | translate}}</span>
              <span *ngIf="shortcut.title">{{shortcut.title}}</span>
            </a>
          </ng-template>
        </ng-container>
      </div>

      <div cdkDropList [cdkDropListData]="third" class="shortcut-list" (cdkDropListDropped)="drop($event, 'third')">
        <p *ngIf="editState" class="shortcut-desc">{{'HOME.SHORTCUTS.REORDER' | translate}}</p>
        <ng-container *ngFor="let shortcut of third">
          <!-- <template [ngTemplateOutlet]="shortcutRef" [ngTemplateOutletContext]="{shortcut: item}"></template> -->
          <ng-template cnslHasRole [hasRole]="shortcut.withRole">
            <a [routerLink]="shortcut.routerLink" class="shortcut-box"
              [ngClass]="{'edit-state': editState  && !shortcut.disabled}" cdkDrag
              [cdkDragDisabled]="shortcut.disabled">
              <div class="shortcuts-avatar {{shortcut.color}}">
                <mat-icon *ngIf="shortcut.svgIcon" class="icon" [svgIcon]="shortcut.svgIcon"></mat-icon>
                <i *ngIf="shortcut.icon" class="icon {{shortcut.icon}}"></i>
              </div>
              <span *ngIf="shortcut.i18nTitle">{{shortcut.i18nTitle | translate}}</span>
              <span *ngIf="shortcut.title">{{shortcut.title}}</span>
            </a>
          </ng-template>
        </ng-container>
      </div>
    </div>
  </div>

  <div class="shortcut-container" *ngIf="editState">
    <h2>{{'HOME.SHORTCUTS.SETTINGS' | translate}}</h2>

    <div class="shortcut-grid-row">
      <p *ngIf="editState" class="shortcut-desc">{{'HOME.SHORTCUTS.ADD' | translate}}</p>

      <div cdkDropList [cdkDropListData]="all" class="shortcut-grid" (cdkDropListDropped)="drop($event, '')">
        <ng-container *ngFor="let shortcut of all">
          <!-- <template [ngTemplateOutlet]="shortcutRef" [ngTemplateOutletContext]="{shortcut: item}"></template> -->
          <ng-template cnslHasRole [hasRole]="shortcut.withRole">
            <div class="shortcut-box no-margin edit-state" cdkDrag [cdkDragDisabled]="shortcut.disabled">
              <div class="shortcuts-avatar {{shortcut.color}}">
                <mat-icon *ngIf="shortcut.svgIcon" class="icon" [svgIcon]="shortcut.svgIcon"></mat-icon>
                <i *ngIf="shortcut.icon" class="icon {{shortcut.icon}}"></i>
              </div>
              <span *ngIf="shortcut.i18nTitle">{{shortcut.i18nTitle | translate}}</span>
              <span *ngIf="shortcut.title">{{shortcut.title}}</span>
            </div>
          </ng-template>
        </ng-container>
      </div>
    </div>
  </div>
</div>

<ng-template #shortcutRef let-shortcut="shortcut">
  <ng-template cnslHasRole [hasRole]="shortcut.withRole">
    <div class="shortcut-box edit-state" cdkDrag [cdkDragDisabled]="shortcut.disabled">
      <div class="shortcuts-avatar {{shortcut.color}}">
        <mat-icon *ngIf="shortcut.svgIcon" class="icon" [svgIcon]="shortcut.svgIcon"></mat-icon>
        <i *ngIf="shortcut.icon" class="icon {{shortcut.icon}}"></i>
      </div>
      <span *ngIf="shortcut.i18nTitle">{{shortcut.i18nTitle | translate}}</span>
      <span *ngIf="shortcut.title">{{shortcut.title}}</span>
    </div>
  </ng-template>
</ng-template>