name: e2e tmp
on:
  push:
    branches-ignore:
      - master
env:
  E2E_ORG_OWNER_PW: ${{ secrets.E2E_ORG_OWNER_PW }}
  E2E_ORG_OWNER_VIEWER_PW: ${{ secrets.E2E_ORG_OWNER_VIEWER_PW }}
  E2E_ORG_PROJECT_CREATOR_PW: ${{ secrets.E2E_ORG_PROJECT_CREATOR_PW }}
  E2E_SERVICEACCOUNT_KEY: ${{ secrets.E2E_SERVICEACCOUNT_KEY }}
jobs:
  dev-release:
    name: Dev-Release ORBOS
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-node@v2
      with:
        node-version: '14'
    - name: Install dependencies
      run: npm ci
      working-directory: ./console
    - name: Install dependencies
      run: npx playwright install --with-deps
      working-directory: ./console
    - name: Run tests
      run: ./playwright.sh ./ci.env
      working-directory: ./console
    - uses: actions/upload-artifact@v1
      if: ${{ always() }}
      with:
        name: e2e-test-results
        path: console/tests/e2e/results
