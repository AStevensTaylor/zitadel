<div class="filter-button-wrapper">
  <button mat-stroked-button class="filter-toggle cnsl-action-button" color="primary" (click)="toggleFilter()">
    <i class="las la-filter no-margin"></i>
    <span>{{ 'ACTIONS.FILTER' | translate }}</span>
    <span *ngIf="filterCount" class="filter-count">{{filterCount}}</span>
  </button>
  <div *ngIf="showFilter" class="filter-wrapper">
    <div class="filter-top">
      <button mat-stroked-button color="primary" (click)="reset(); emitFilter()">{{'ACTIONS.RESET' |
        translate}}</button>
      <span>{{'FILTER.TITLE' | translate}}</span>
      <button mat-raised-button color="primary" (click)="emitFilter()">{{'ACTIONS.FINISH' | translate}}</button>
    </div>

    <div class="filter-row" *ngIf="type === FilterType.USER">
      <div class="name-query">
        <mat-checkbox id="displayname" class="cb" [checked]="getSubFilter(SubQuery.DISPLAYNAME)"
          (change)="changeCheckbox(SubQuery.DISPLAYNAME, $event )">{{'FILTER.DISPLAYNAME' | translate}}
        </mat-checkbox>
        <div class="subquery" *ngIf="getSubFilter(SubQuery.DISPLAYNAME) as dnq">
          <!-- <span class="filter-value-label">{{'FILTER.CONTAINS_IGNORE_CASE' | translate}}</span> -->
          <cnsl-form-field class="filter-select-method" appearance="outline">
            <mat-select [value]="dnq.getMethod()" (selectionChange)="setMethod(dnq, $event)">
              <mat-option *ngFor="let method of methods" [value]="method">
                {{ 'FILTER.METHODS.'+method | translate}}
              </mat-option>
            </mat-select>
          </cnsl-form-field>

          <cnsl-form-field class="filter-input-value" appearance="outline">
            <input cnslInput name="value" [value]="dnq.getDisplayName()"
              (change)="setValue(SubQuery.DISPLAYNAME, dnq, $event)" />
          </cnsl-form-field>
        </div>
      </div>

      <div class="email-query">
        <mat-checkbox id="email" class="cb" [checked]="getSubFilter(SubQuery.EMAIL)"
          (change)="changeCheckbox(SubQuery.EMAIL, $event )">{{'FILTER.EMAIL' | translate}}
        </mat-checkbox>
        <div class="subquery" *ngIf="getSubFilter(SubQuery.EMAIL) as eq">
          <cnsl-form-field class="filter-select-method" appearance="outline">
            <mat-select [value]="eq.getMethod()" (selectionChange)="setMethod(eq, $event)">
              <mat-option *ngFor="let method of methods" [value]="method">
                {{ 'FILTER.METHODS.'+method | translate}}
              </mat-option>
            </mat-select>
          </cnsl-form-field>

          <cnsl-form-field class="filter-input-value" appearance="outline">
            <input cnslInput name="value" [value]="eq.getEmailAddress()"
              (change)="setValue(SubQuery.EMAIL, eq, $event)" />
          </cnsl-form-field>
        </div>
      </div>

      <div class="usernane-query">
        <mat-checkbox id="username" class="cb" [checked]="getSubFilter(SubQuery.USERNAME)"
          (change)="changeCheckbox(SubQuery.USERNAME, $event )">{{'FILTER.USERNAME' | translate}}
        </mat-checkbox>
        <div class="subquery" *ngIf="getSubFilter(SubQuery.USERNAME) as unq">
          <cnsl-form-field class="filter-select-method" appearance="outline">
            <mat-select [value]="unq.getMethod()" (selectionChange)="setMethod(unq, $event)">
              <mat-option *ngFor="let method of methods" [value]="method">
                {{ 'FILTER.METHODS.'+method | translate}}
              </mat-option>
            </mat-select>
          </cnsl-form-field>

          <cnsl-form-field class="filter-input-value" appearance="outline">
            <input cnslInput name="value" [value]="unq.getUserName()"
              (change)="setValue(SubQuery.USERNAME, unq, $event)" />
          </cnsl-form-field>
        </div>
      </div>
    </div>
  </div>
</div>